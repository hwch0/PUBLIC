<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kr.pub.dao.UserDAO">

	<select id="getUserList" resultType="com.kr.pub.dto.UserDTO">
		select * from users
	</select>
	<select id="getUser" resultType="com.kr.pub.dto.UserDTO">
		select * from users 
		<![CDATA[
			where user_id = #{userId}
		]]>
	</select>
	
	<select id="login" resultType="com.kr.pub.dto.UserDTO">
	    SELECT * FROM users WHERE user_id = #{userId} AND password = #{password}
	</select>

	<select id="getRemainingTime" resultType="int">
		SELECT remaining_time FROM users WHERE user_id = #{userId}
	</select>
	<update id="updateLoginTime">
		UPDATE users
		SET login_time = #{loginTime}
		WHERE user_id = #{userId}
	</update>
	<update id="updateAllTime">
		UPDATE users
		SET logout_time = #{logoutTime}, remaining_time = #{remainingTime}
		WHERE user_id = #{userId}
	</update>
	<update id="updateSeat">
		UPDATE seat
		SET used = 'Y', user_id = #{userId}
		WHERE seat_no = #{seatNo}
	</update>
	
</mapper>